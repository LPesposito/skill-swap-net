{% extends "base.html" %}
{% block title %}Novo Pedido • SkillSwap{% endblock %}
{% block header_title %}Novo Pedido{% endblock %}

{% block content %}
<div class="row">
  <div class="col-12 col-xl-8 col-xxl-6">
    <div class="card shadow-sm border-0">
      <div class="card-body p-4">
        <form method="post" enctype="application/x-www-form-urlencoded" novalidate>
          {% csrf_token %}

          <div class="mb-3">
            <label class="form-label" for="id_offered_skill">Serviço/Skill</label>
            <select name="offered_skill" id="id_offered_skill" class="form-select{% if form.offered_skill.errors %} is-invalid{% endif %}">
              {% for skill in form.offered_skill.field.queryset %}
                <option value="{{ skill.pk }}">{{ skill.name }} — @{{ skill.user.username }}</option>
              {% endfor %}
            </select>
            <div class="form-text">Selecione um serviço oferecido por um provedor.</div>
            {% if form.offered_skill.errors %}
              <div class="invalid-feedback d-block">{{ form.offered_skill.errors|striptags }}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            <label class="form-label" for="id_description">Descrição</label>
            <textarea name="description" id="id_description" rows="6" class="form-control{% if form.description.errors %} is-invalid{% endif %}">{{ form.description.value|default:'' }}</textarea>
            {% if form.description.errors %}
              <div class="invalid-feedback d-block">{{ form.description.errors|striptags }}</div>
            {% endif %}
          </div>

          <div class="d-flex gap-2">
            <button class="btn btn-primary" type="submit">Enviar pedido</button>
            <a href="{% url 'services:requests' %}" class="btn btn-outline-secondary">Cancelar</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
