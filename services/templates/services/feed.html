{% extends "base.html" %}
{% load static %}

{% block title %}Feed â€¢ SkillSwap{% endblock %}
{% block header_title %}Feed de ServiÃ§os{% endblock %}

{% block extra_head %}
  <style>
    .rating .star { width: 1.1rem; height: 1.1rem; }
    .rating .star path { fill: #ffd166; stroke: #f0ad4e; }
    .rating .star.empty path { fill: #e9ecef; stroke: #ced4da; }
    .service-card-toggle { text-decoration: none; color: inherit; }
    .service-meta { font-size: .9rem; color: #6c757d; }
    .truncate-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
  </style>
{% endblock %}

{% block content %}
  <!-- Busca -->
  <div class="row mb-4">
    <div class="col-12 col-lg-10 col-xl-8">
      <form method="get" action="" class="input-group input-group-lg shadow-sm">
        <span class="input-group-text bg-white border-end-0">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
        </span>
        <input type="search" name="q" value="{{ request.GET.q }}" class="form-control border-start-0" placeholder="Buscar serviÃ§os, habilidades, localidade...">
        <button class="btn btn-primary" type="submit">Buscar</button>
      </form>
    </div>
  </div>

  {% if services %}
    {% with items=services %}
      {% include "services/partials/_feed_list.html" with items=items %}
    {% endwith %}
  {% elif service_requests %}
    {% with items=service_requests %}
      {% include "services/partials/_feed_list.html" with items=items %}
    {% endwith %}
  {% else %}
    <div class="alert alert-light border d-flex align-items-center" role="alert">
      <div class="me-2">ðŸ”Ž</div>
      <div>Nenhum serviÃ§o encontrado. Tente ajustar sua busca.</div>
    </div>
  {% endif %}
{% endblock %}

{% block extra_scripts %}
  <script>
    // No custom JS needed; Bootstrap handles collapse behavior.
  </script>
{% endblock %}
